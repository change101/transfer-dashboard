<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Money Transfer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5">
                <div class="transfer-card mt-4 mb-4">
                    <div class="card-header text-center">
                        <h2>Send money</h2>
                    </div>
                    
                    <!-- Success message (hidden by default) -->
                    <div id="successMessage" style="display: none;">
                        <div class="success-container">
                            <div class="success-icon">âœ“</div>
                            <h3>Transaction Complete!</h3>
                            <p>Your money transfer has been processed successfully.</p>
                            <p>You'll receive a confirmation email shortly.</p>
                            <button class="btn-new-transfer" onclick="window.location.href='/'">Send another transfer</button>
                        </div>
                    </div>
                    
                    <div class="transfer-details" id="transferDetails">
                        <div class="loading-container" id="loadingContainer">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-3">Loading transfer details...</p>
                        </div>
                        
                        <div id="transferContent" style="display: none;">
                            <!-- Recipient section -->
                            <div class="section-header">
                                <h3>Recipient</h3>
                            </div>
                            
                            <div class="recipient-section">
                                <!-- Existing recipient info -->
                                <div class="selected-recipient">
                                    <div class="avatar" id="recipientInitial"></div>
                                    <div class="recipient-details">
                                        <div class="recipient-name" id="recipientName"></div>
                                        <div class="recipient-country" id="recipientCountry"></div>
                                    </div>
                                </div>
                                
                                <!-- Previous recipients (shown if user has history) -->
                                <div class="recipient-selector" id="recipientSelector"></div>
                                
                                <!-- Add new recipient button -->
                                <button class="add-new-btn" id="addNewRecipient">
                                    <span class="plus-icon">+</span> Add new recipient
                                </button>
                                
                                <!-- Add new recipient form (hidden by default) -->
                                <form id="addRecipientForm" style="display: none;">
                                    <div class="mb-3">
                                        <label class="form-label">Full Name</label>
                                        <input type="text" class="form-control" id="newRecipientName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Country</label>
                                        <select class="form-select" id="newRecipientCountry" required>
                                            <option value="MX">Mexico</option>
                                            <option value="GT">Guatemala</option>
                                            <option value="CO">Colombia</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Bank Name</label>
                                        <input type="text" class="form-control" id="newRecipientBank">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Bank Account Number</label>
                                        <input type="text" class="form-control" id="newRecipientAccount">
                                    </div>
                                    <div class="form-buttons">
                                        <button type="button" class="btn btn-outline-secondary" id="cancelAddRecipient">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn btn-primary">Add Recipient</button>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Transfer details -->
                            <div class="section-header">
                                <h3>Transfer</h3>
                            </div>
                            
                            <!-- Amount to send -->
                            <div class="amount-section">
                                <div class="amount-left">
                                    <label>You send</label>
                                    <div class="amount" id="sendAmount"></div>
                                </div>
                                <div class="amount-right">
                                    <span id="sendCurrency"></span>
                                </div>
                            </div>
                            
                            <!-- Exchange rate -->
                            <div class="exchange-rate">
                                <div class="rate-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                                    </svg>
                                </div>
                                <span id="exchangeRate"></span>
                            </div>
                            
                            <!-- Recipient receives -->
                            <div class="amount-section">
                                <div class="amount-left">
                                    <label>Recipient receives</label>
                                    <div class="amount" id="receiveAmount"></div>
                                </div>
                                <div class="amount-right">
                                    <span id="receiveCurrency"></span>
                                </div>
                            </div>
                            
                            <!-- Delivery method -->
                            <div class="detail-section">
                                <label>Delivery method</label>
                                <div class="select-field">
                                    <span id="deliveryMethod"></span>
                                    <span class="chevron-down">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- Payment method section -->
                            <div class="section-header">
                                <h3>Payment method</h3>
                            </div>
                            
                            <div class="payment-section">
                                <!-- Current payment method -->
                                <div class="selected-payment">
                                    <div class="card-icon visa"></div>
                                    <div class="card-details">
                                        <div class="card-type">Debit card</div>
                                        <div class="card-number" id="cardNumber">*1234</div>
                                    </div>
                                </div>
                                
                                <!-- Previous payment methods (shown if user has history) -->
                                <div class="payment-selector" id="paymentMethodSelector"></div>
                                
                                <!-- Add new payment method button -->
                                <button class="add-new-btn" id="addNewPayment">
                                    <span class="plus-icon">+</span> Add new payment method
                                </button>
                                
                                <!-- Add new payment method form (hidden by default) -->
                                <form id="addPaymentForm" style="display: none;">
                                    <div class="mb-3">
                                        <label class="form-label">Card Number</label>
                                        <input type="text" class="form-control" id="newCardNumber" required pattern="[0-9]{13,19}">
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col">
                                            <label class="form-label">Expiration Date</label>
                                            <input type="text" class="form-control" id="newCardExpiry" placeholder="MM/YY" required>
                                        </div>
                                        <div class="col">
                                            <label class="form-label">CVV</label>
                                            <input type="text" class="form-control" id="newCardCvv" required pattern="[0-9]{3,4}">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Card Type</label>
                                        <select class="form-select" id="newCardType" required>
                                            <option value="Visa">Visa</option>
                                            <option value="Mastercard">Mastercard</option>
                                            <option value="Amex">American Express</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Name on Card</label>
                                        <input type="text" class="form-control" id="newCardName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Country</label>
                                        <input type="text" class="form-control" id="newCardCountry" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Zip Code</label>
                                        <input type="text" class="form-control" id="newCardZip" required>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="newCardDefault">
                                        <label class="form-check-label" for="newCardDefault">Make default</label>
                                    </div>
                                    <div class="form-buttons">
                                        <button type="button" class="btn btn-outline-secondary" id="cancelAddPayment">
                                            Cancel
                                        </button>
                                        <button type="submit" class="btn btn-primary">Add Payment Method</button>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Fee and total section -->
                            <div class="fee-section">
                                <div class="fee-line">
                                    <span>Transfer fees</span>
                                    <span id="transferFee"></span>
                                </div>
                                <div class="total-line">
                                    <span>Total</span>
                                    <span id="totalAmount"></span>
                                </div>
                            </div>
                            
                            <!-- Continue button -->
                            <div class="action-section">
                                <button id="continueButton" class="continue-btn">Send money</button>
                            </div>
                        </div>
                        
                        <!-- Error message container -->
                        <div id="errorContainer" style="display: none;">
                            <div class="alert alert-danger">
                                <h5>Transfer data not found</h5>
                                <p>We couldn't find your transfer details. Please return to WhatsApp and try again.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
